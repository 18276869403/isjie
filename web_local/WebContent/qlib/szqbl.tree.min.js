(function(win) {
	win.szqbl = win.szqbl || {};
	win.szqbl.initTree = function(collapse) {
		$(".qTreeNode").click(function() {
			var state = $(this).attr("state");
			$(this).attr("state", state == 'true' ? 'false' : 'true');
			$(this).html(state == 'true' ? '&#xe625;' : '&#xe623;');
			$(".p" + $(this).attr("par")).each(function() {
				if (state == 'false') {
					$(this).parent().parent().parent().hide();
				} else {
					if ('true' == $(this).attr('child'))
						$(this).html('&#xe625;');
					$(this).parent().parent().parent().show();
				}
			});
		});
		//默认收起来
		if (typeof collapse == 'undefined' || collapse == true) {
			$(".qTreeLevel1").each(function() {
				if ('true' == $(this).attr('child')) {
					var state = $(this).attr("state");
					$(this).attr("state", state == 'true' ? 'false' : 'true');
					$(this).html(state == 'true' ? '&#xe625;' : '&#xe623;');
					$(".p" + $(this).attr("par")).each(function() {
						if (state == 'false') {
							$(this).parent().parent().parent().hide();
						} else {
							if ('true' == $(this).attr('child'))
								$(this).html('&#xe625;');
							$(this).parent().parent().parent().show();
						}
					});
				}
			})
		}
	};
}(window));